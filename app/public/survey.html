<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Libre+Barcode+39+Text');
        @import url('https://fonts.googleapis.com/css?family=Baloo+Tammudu');
    </style>
    <meta charset="UTF-8">
    <title>Servey match</title>
    <link rel="shortcut icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTshnDTQYRi4kLB5oZlFJOgvGLmiX-olzcs1AFV31HqvHqwg7UL">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!-- <script src="static/survey.js"></script> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="static/cssforsurvey.css">
</head>

<body>


    <div class=" mainCont container-fluid text-center">
        <a href="/"><button class="btn">home</button></a>
        <div class="form-group">
            <h2> <label class="name" for="formGroupExampleInput">Your Name</label></h2>
            <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Your name goes here...." required>
        </div>
       
<!-- POMENYAL LABEL NOMERA 2   INPUT ^ 2  VNIZU UBRAL-->
        <div class="form-group">
            <h2><label for="formGroupExampleInput2">Link On Picture</label></h2>
            <input type="text" class="form-control" id="formGroupExampleInput2" placeholder="Your Picture url goes here..." required>
            
    </div>
    <div class="wrap container-fluid text-center">
        <h1 class="likert-header">Find your Match</h1>
        <form action="">
            <label class="statement">Sweaming in open Ocean is great</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question1" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question1" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">?Agreed to Dive in Mariana Trench</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question2" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question2" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Woke up in Jurassik Park</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question3" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question3" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">You on the Space-Ship.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question4" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question4" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Doolars in Suitcase is Good with you?.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question5" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question5" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Coding, coding, day and nights?.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question6" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question6" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">It is best practice to Use Frameworks ...</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question7" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question7" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">climb up on empire state building.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question8" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question8" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Though thorns upTo the stars</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question9" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question9" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <label class="statement">Keep Calm, and kepp Coding.</label>
            <ul class='likert'>
                <li>
                    <input type="radio" name="question10" value="1">
                    <label>Strongly agree</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="2">
                    <label>Agree</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="3">
                    <label>Neutral</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="4">
                    <label>Disagree</label>
                </li>
                <li>
                    <input type="radio" name="question10" value="5">
                    <label>Strongly disagree</label>
                </li>
            </ul>
            <div class="buttons">
                <button class="clear">Clear</button>
                <button class="submit">Submit</button>
            </div>
        </form>

        <div class="row toShow ">
            <h1 class="appendH1">You have your match</h1>
            <div class="col-md-offset-2  col-xs-6 col-md-3 mainPic matcher">
                <a href="#" class="thumbnail matcing">
                    <img class='imgMain img-thumbnail img-responsive ' src="https://yt3.ggpht.com/-_IXzYFNWU8U/AAAAAAAAAAI/AAAAAAAAAAA/6tXWVmD0E64/s900-c-k-no-mo-rj-c0xffffff/photo.jpg" alt="">
                </a>
            </div> 
             <div class=" col-md-offset-2  col-xs-3 col-md-3 mainPic testDoer">
                <a href="#" class="thumbnail tester">
                    <img class='imgMain img-thumbnail img-responsive' src="https://yt3.ggpht.com/-_IXzYFNWU8U/AAAAAAAAAAI/AAAAAAAAAAA/6tXWVmD0E64/s900-c-k-no-mo-rj-c0xffffff/photo.jpg" alt="">
                </a>
            </div> 
        </div>

    </div>


</body>
<script>
    $(document).ready(function () {
        $(".toShow").hide();

        // GLOBAL TEST CASE FOR INPUT
        $("#formGroupExampleInput")[0].value = "Example match";
        $("#formGroupExampleInput2")[0].value =
            "https://s-media-cache-ak0.pinimg.com/originals/06/fd/b7/06fdb7ea2630aedf68692b605aed7656.jpg";

        var stuff = [];
        for (i = 1; i <= 10; i++) {
            var element = document.getElementsByName("question" + [i]);

            stuff.push(element);
        }
        for (var i = 0; i < 10; i++) {
            var random = Math.floor(Math.random() * 5);
            stuff[i][random].checked = true;
        }
        // document.getElementsByTagName('button')[1].click()
        console.log(stuff);

        // console.log('hello')

        $(".submit").on("click", function (event) {

            event.preventDefault()
            // $('body').css('overflow-y', ' hidden')
            var answers = [];
            // console.log($("input[name]:checked").length)[1].value;
            var a = $("#formGroupExampleInput")[0].value;
            var b = $("#formGroupExampleInput2")[0].value;
            if (
                $("input[name]:checked").length !== 10 ||
                a == "" ||
                a == null ||
                b == "" ||
                b == null
            ) {
                alert("Answer all questions");
                location.reload();
            }
            var totals = $("input[name]:checked");

            console.log(totals);
            for (var i = 0; i < totals.length; i++) {
                answers.push(parseInt(totals[i].value));

                console.log(answers);

                event.preventDefault();
            }

            console.log(answers);

            var NewApplicant = {
                name: $("#formGroupExampleInput")[0].value.trim(),
                photo: $("#formGroupExampleInput2")[0].value.trim(),
                scores: [...answers],
                total: answers.reduce((a, b) => a + b, 0)
            };
            $.ajax({
                url: "/people",
                type: "GET",
                dataType: "JSON"
            }).done(function (data) {
                // math.abs()
                console.log(NewApplicant.total);
                var holderDifferences = [];
                data.forEach(function (element, index) {
                    var difference = Math.abs(element.total - NewApplicant.total);
                    console.log(difference);
                    holderDifferences.push(difference);
                    // Math.min(...arr)
                });
                console.log(holderDifferences);
                console.log(holderDifferences.indexOf(Math.min(...holderDifferences)));
                //we create array of differences between scores, then we finding the smallest number in array
                //and defining it's index, since the index is going to match in DATA object then we can pull
                //whole data with this object as a perfect match find out what id there is two of small numbers
                // console.log('Your Perfect match is')
                // console.log(data[holderDifferences.indexOf(Math.min(...holderDifferences))])
                // <img src="${data[holderDifferences.indexOf(Math.min(...holderDifferences))].photo}" alt=""></img>

                $("form, .form-group, .likert-header").fadeOut("slow");

                function DisplayStuff() {
                            // $(".matcher").animateCss("bounceInLeft");
                            // $(".testDoer").animateCss("bounceInRight");
                            // $(".appendH1").animateCss("bounceInDown");

                    $(".tester").append(`<h3>${NewApplicant.name}</h3>`);
                    $(".matcing").append(
                        `<h3>${data[holderDifferences.indexOf(Math.min(...holderDifferences))]
                            .name}</h3>`
                    );
                    $(".matcing").attr(
                        "href",
                        `${data[holderDifferences.indexOf(Math.min(...holderDifferences))]
                            .name}`
                    );
                    $(".tester").attr("href", `${NewApplicant.name}`);

                    var src =
                        data[holderDifferences.indexOf(Math.min(...holderDifferences))].photo;
                    $(".thumbnail img").attr("src", src);
                    $(".tester img").attr("src", NewApplicant.photo);
                    $(".toShow").show();
                }
                setTimeout(DisplayStuff, 1000);
            });
                console.log(NewApplicant)
            $.ajax({
                type: "POST",
                url: "/people/new",
                data: NewApplicant,
                success: function (msg) {
                    console.log(" I pass the body");
                    console.log("Good added stuff");
                }
            });
        });
    });

    
</script>
</html>